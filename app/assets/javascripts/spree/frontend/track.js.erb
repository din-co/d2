// track is the preferred way to send funnel events to our analytics platforms.
function track(args) {
  <% unless TRUE_PRODUCTION_INSTANCE %>
    console.log('Track: ' + JSON.stringify(args));
  <% end %>
  // trackAmplitude(args);
  trackKissmetrics(args);
  trackIntercom(args);
}

function trackAmplitude(args) {
  return amplitude.logEvent(args.name, args.metadata);
}

function trackKissmetrics(args) {
  _kmq.push(['record', args.name, args.metadata]);
}

function trackIntercom(args) {
  $(function() {
    Intercom('trackEvent', args.name, args.metadata);
  });
}
