<% if @meal_preference.present? && @meal_preference.errors.any? %>
  <div id="error_explanation">
    <h2>
      <%= pluralize(@meal_preference.errors.count, "error") %> prohibited
      this from being saved:
    </h2>
    <ul>
      <% @meal_preference.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="row">
  <div class="col-sm-6">
    <h3>I enjoy meals with:</h3>
    <div class="checkbox"><label><%= f.check_box :diet_beef %> beef</label></div>
    <div class="checkbox"><label><%= f.check_box :diet_lamb %> lamb</label></div>
    <div class="checkbox"><label><%= f.check_box :diet_pork %> pork</label></div>
    <div class="checkbox"><label><%= f.check_box :diet_poultry %> poultry</label></div>
    <div class="checkbox"><label><%= f.check_box :diet_rabbit %> rabbit</label></div>
    <div class="checkbox"><label><%= f.check_box :diet_fish %> fish</label></div>
    <div class="checkbox"><label><%= f.check_box :diet_seafood %> seafood</label></div>
    <div class="checkbox"><label><%= f.check_box :diet_tofu %> tofu</label></div>
    <div class="checkbox"><label><%= f.check_box :diet_tempeh %> tempeh</label></div>
  </div>
  <div class="col-sm-6">
    <h3>I canâ€™t eat these foods:</h3>
    <div class="checkbox"><label><%= f.check_box :allergen_none %> none</label></div>
    <div class="checkbox"><label><%= f.check_box :allergen_eggs %> eggs</label></div>
    <div class="checkbox"><label><%= f.check_box :allergen_fish %> fish</label></div>
    <div class="checkbox"><label><%= f.check_box :allergen_milk %> milk</label></div>
    <div class="checkbox"><label><%= f.check_box :allergen_peanuts %> peanuts</label></div>
    <div class="checkbox"><label><%= f.check_box :allergen_shellfish %> shellfish</label></div>
    <div class="checkbox"><label><%= f.check_box :allergen_soybeans %> soybeans</label></div>
    <div class="checkbox"><label><%= f.check_box :allergen_tree_nuts %> tree nuts</label></div>
    <div class="checkbox"><label><%= f.check_box :allergen_wheat_gluten %> wheat/gluten</label></div>
  </div>
</div>

<p>
  <%= f.submit "Save Meal Preferences", :class => 'btn btn-primary' %>
</p>

<script type="text/javascript">
$(function(){
  var allergens = $("[name^='meal_preference[allergen']")
  var noAllergens = $("#meal_preference_allergen_none")
  allergens.click(function(){
    if ($(this).is(noAllergens) && $(this)[0].checked) {
      allergens.not(noAllergens).prop({checked: false});
    } else {
      noAllergens.prop({checked: false});
    }
  })
})
</script>
